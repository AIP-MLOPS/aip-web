<div *ngIf="noGraphs" class="no-output">
  <i class="icon i-no-plots no-output-icon"></i>
  <h3>NO CHART DATA</h3>
</div>
<sm-graph-settings-bar
  [ngClass]="{showSettings: showSettings && minimized}"
  [smoothWeight]="smoothWeight"
  [xAxisType]="xAxisType"
  [groupBy]="groupBy"
  [groupByOptions]="groupByOptions"
  (changeWeight)="changeWeight.emit($event)"
  (toggleSettings)="toggleSettings.emit()"
  (changeXAxisType)="changeXAxisType.emit($event)"
  (changeGroupBy)="changeGroupBy.emit($event)"
></sm-graph-settings-bar>
<div class="metrics-section" [class.with-settings]="showSettings">
  <div class="all-metrics" [ngClass]="{'row': !isGroupGraphs}" #allMetrics>
    <div *ngFor="let metric of graphList;trackBy: trackByFn" class="metric-group-container less-padding"
         [class.hidden]="hiddenList.includes(metric)"
         [class.two-in-a-row]="!isGroupGraphs && graphList.length > 1 && isWidthBigEnough()"
         [style.height.percent]=""
    >
      <div [id]="EXPERIMENT_GRAPH_ID_PREFIX + metric" class="graph-id">
        <div>
          <div class="metric-group-header" *ngIf="isGroupGraphs">{{metric}}</div>
          <div *ngIf="plotlyReady$ | async" [ngClass]="{'row': isGroupGraphs, 'single-graph': graphsData[metric].length === 1}">
            <sm-single-graph *ngFor="let chartItem of graphsData[metric];trackBy: trackByIdFn.bind(this, metric)"
                             [class.less-padding]="isGroupGraphs"
                             [class.two-in-a-row]="isGroupGraphs && chartItem?.data[0]?.type !== 'table' && graphsData[metric].length > 1 && isWidthBigEnough()"
                             [legendStringLength]="legendStringLength"
                             [chart]="chartItem"
                             [id]="SINGLE_GRAPH_ID_PREFIX + EXPERIMENT_GRAPH_ID_PREFIX + metric + chartItem.layout.title + chartItem.iter + chartItem.variant + (chartItem.layout.images && chartItem.layout.images[0]?.source)"
                             [isCompare]="isCompare"
                             [smoothWeight]="smoothWeight"
                             [xAxisType]="xAxisType"
                             [moveLegendToTitle]="groupBy === groupByCharts.None"
                             [identifier]="SINGLE_GRAPH_ID_PREFIX + EXPERIMENT_GRAPH_ID_PREFIX + metric + chartItem.layout.title + chartItem.iter + chartItem.variant + (chartItem.layout.images && chartItem.layout.images[0]?.source)">
            </sm-single-graph>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

